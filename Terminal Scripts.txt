cd /Users/tuba.gokhan/Documents/GitHub/ObliQACrossRef

# 1) in your shell session
export OPENAI_API_KEY="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"

python src/generate_qas_baseline.py \
  --input_csv data/CrossReferenceData.csv \
  --output_jsonl outputs/qas_baseline_generation.jsonl \
  --report_json outputs/qas_baseline_generationreport.json \
  --model gpt-4o \
  --max_q_per_pair 2 \
  --sample_n 3 \
  --dedup \
  --verbose


pip install google-generativeai
export GOOGLE_API_KEY="AIzaSyA8xTOHyy6SSXtTpg_rv-dmD8mpzWAuDlQ"

python src/judge_qas_baseline.py \
  --input_jsonl outputs/qas_baseline_generation.jsonl \
  --kept_jsonl outputs/qas_baseline_judgement_kept.jsonl \
  --eliminated_jsonl outputs/qas_baseline_judgement_eliminated.jsonl \
  --report_json outputs/qas_baseline_judging_report.json \
  --model gemini-2.5-pro \
  --verbose

mkdir -p stats

python src/inspect_qas_baseline.py \
  --kept_jsonl outputs/qas_baseline_judgement_kept.jsonl \
  --rejected_jsonl outputs/qas_baseline_judgement_eliminated.jsonl \
  --out_summary_json stats/qas_baseline_inspect_summary.json \
  --persona_csv stats/qas_baseline_persona_stats.csv \
  --reasons_csv stats/qas_baseline_rejection_pivot.csv \

  --length_bins_csv stats/qas_baseline_length_hists.csv



———


# run a small subset to test
python src/01_extract_schemas.py \
  --input_csv data/CrossReferenceData.csv \
  --output_jsonl outputs/extracted_schema.jsonl \
  --sample_n 30 --sample_seed 13 \
  --model gpt-4o \
  --drop_title_targets

#full
python src/01_extract_schemas.py \
  --input_csv data/CrossReferenceData.csv \
  --output_jsonl outputs/extracted_schema.jsonl \
  --model gpt-4o \
  --drop_title_targets


python src/02_generate_qas.py \
  --input_jsonl outputs/extracted_schema.jsonl \
  --output_jsonl outputs/qas_from_schema.jsonl \
  --report_json outputs/qas_from_schema_report.json \
  --model gpt-4o \
  --max_q_per_pair 2 \
  --sample_n 3 \
  --dedup \
  --verbose


